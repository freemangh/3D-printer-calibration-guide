<template>
  <q-page>
    <PopUpImage v-model:url.sync="imgUrl" />
    <div class="page row justify-center">
      <q-card class="col-12 q-pa-md" bordered>
        <h3 class="q-mt-none">
          –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è E-Steps
        </h3>

        <p>
          –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è E-Steps (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤ –Ω–∞ –æ–¥–∏–Ω –º—ñ–ª—ñ–º–µ—Ç—Ä —Ñ—ñ–ª–∞–º–µ–Ω—Ç—É),
          —Ç–∞–∫–æ–∂ –≤—ñ–¥–æ–º–µ —è–∫ "–µ–∫—Å—Ç—Ä—É–¥–µ—Ä–Ω–∏–π –∫–∞–ª—ñ–±—Ä" –∞–±–æ "–µ–∫—Å—Ç—Ä—É–¥–µ—Ä–Ω–∞ –∫–∞–ª—ñ–±—Ä–∞—Ü—ñ—è", —î
          –≤–∞–∂–ª–∏–≤–∏–º –∫—Ä–æ–∫–æ–º –¥–ª—è —Ç–æ—á–Ω–æ–≥—ó –ø–æ–¥–∞—á—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª—É —É –≤–∞—à–æ–º—É 3D-–ø—Ä–∏–Ω—Ç–µ—Ä—ñ –∑
          —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—î—é FDM. –ö–æ–ª–∏ –µ–∫—Å—Ç—Ä—É–¥–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π, —Ü–µ –¥–æ–ø–æ–º–∞–≥–∞—î
          —É–Ω–∏–∫–Ω—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º, —Ç–∞–∫–∏—Ö —è–∫ –ø–µ—Ä–µ-–µ–∫—Å—Ç—Ä—É–∑—ñ—è —á–∏ –Ω–µ–¥–æ-–µ–∫—Å—Ç—Ä—É–∑—ñ—è. –¢–∞–∫–æ–∂ —Ü—é
          –ø—Ä–æ—Ü–µ–¥—É—Ä—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –ø—ñ—Å–ª—è –∑–∞–º—ñ–Ω–∏
          <q-btn to="feeder" outline class="q-py-none" label="–§–Ü–î–ï–†–ê" />.
        </p>

        <p>–©–æ–± –≤—ñ–¥–∫–∞–ª—ñ–±—Ä—É–≤–∞—Ç–∏ E-Steps –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –º–∞—Ä–∫–µ—Ä —ñ –ª—ñ–Ω—ñ–π–∫–∞.</p>

        <p>
          –î–ª—è –ø–æ—á–∞—Ç–∫—É –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥—ñ–∑–Ω–∞—Ç–∏—Å—å –ø–æ—Ç–æ—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è E-Steps
          <q-badge color="info" text-color="black">
            OldE
            <q-icon name="info" size="14px" class="q-ml-xs" />
          </q-badge>
          —Ü–µ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ –µ–∫—Ä–∞–Ω –∞–±–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é GCODE: M503
          M503 - –ø–æ–≤–µ—Ä—Ç–∞—î —É—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞–π—Ç–∏ 
          —Ä—è–¥–æ–∫ —Å M92 —Ç–∞ –∑–∞–ø–∏—Å–∞—Ç–∏ —Ü–∏—Ñ—Ä—É –ø—ñ—Å–ª—è E(–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: E99.00).
        </p>

        <p>
          –ó–∞–ø—Ä–∞–≤–ª—è—î–º–æ
          <q-btn to="filament" outline class="q-py-none" label="—Ñ—ñ–ª–∞–º–µ–Ω—Ç" />
          –≤
          <q-btn to="feeder" outline class="q-py-none" label="—Ñ—ñ–¥–µ—Ä" />, –≥—Ä—ñ—î–º–æ
          —Å–æ–ø–ª–æ, –ø—Ä–∏–∫–ª–∞–¥—É—î–º–æ –ª—ñ–Ω—ñ–π–∫—É —ñ —Å—Ç–∞–≤–∏–º–æ –≤—ñ–¥–º—ñ—Ç–∫—É, —á–µ—Ä–µ–∑
          <q-badge color="info" text-color="black">
            Mark
            <q-icon name="info" size="14px" class="q-ml-xs" />
          </q-badge>
          11—Å–º —Ñ—ñ–¥
          <q-btn to="feeder" outline class="q-py-none" label="—Ñ—ñ–¥–µ—Ä–∞" />
          -
          <q-btn
            outline
            class="q-py-none"
            label="—Ñ–æ—Ç–æ"
            @click="imgUrl = '/ucarecdn.webp'"
          />
          –≤–∏–¥–∞–≤–ª—é—î–º–æ
          <q-badge color="info" text-color="black">
            Move
            <q-icon name="info" size="14px" class="q-ml-xs" />
          </q-badge>
          10—Å–º –ø—Ä—É—Ç–∫–∞ —ñ –º—ñ—Ä—è—î–º–æ

          <q-badge color="info" text-color="black">
            Fact
            <q-icon name="info" size="14px" class="q-ml-xs" />
          </q-badge>
          –≤—ñ–¥—Å—Ç–∞–Ω—å –¥–æ –Ω–∞—à–æ—ó –º—ñ—Ç–∫–∏, –∑ –æ—Ç—Ä–∏–º–∞–Ω–∏–º–∏ –¥–∞–Ω–Ω–∏–º–∏ –π–¥–µ–º –¥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –≤
          –∫—ñ–Ω—Ü—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏. –ü—ñ—Å–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–≤–æ–¥–∏–º–æ –π–æ–≥–æ –≤
          –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∏–Ω—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ –µ–∫—Ä–∞–Ω –∞–±–æ —á–µ—Ä–µ–∑ GCODE (–ø—ñ–∑–Ω—ñ—à–µ –±—É–¥—É—Ç—å
          –¥–æ–¥–∞–Ω—ñ g–∫–æ–¥–∏) —ñ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ EPPROM.
        </p>

        <p>
          –ù–µ –æ–±–æ–≤—è–∑–∫–æ–≤–æ –∞–ª–µ –±–∞–∂–∞–Ω–æ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è. –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ —â–µ –∑–±—ñ–ª—å—à–∏—Ç–∏
          —Ç–æ—á–Ω—ñ—Å—Ç—å —Ç–æ –ø—ñ—Å–ª—è –∫–∞–ª—ñ–±—Ä–æ–≤–∫–∏ –∑ 11—Å–º –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –≤—Å—é —Ç—É —Å–∞–º—É
          –ø—Ä–æ—Ü–µ–¥—É—Ä—É –∞–ª–µ –∑ –±—ñ–ª—å—à–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —É–∂–µ –∑ 31—Å–º (–∑–Ω–∞—á–µ–Ω–Ω—è
          –±—ñ–ª—å—à–µ –Ω—ñ—Ö 31 –Ω–∞ –º–æ—é –¥—É–º–∫—É –Ω–µ –±—É–¥–µ –º–∞—Ç–∏ –æ—Å–æ–±–ª–∏–≤–æ –≤–µ–ª–∏–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è,
          —Ç–∞–∫–æ—ó —Ç–æ—á–Ω–æ—Å—Ç—ñ –∫–∞–ª—ñ–±—Ä–æ–≤–∫–∏ –±—É–¥–µ –≤–∂–µ —Ç–æ—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ)
        </p>
      </q-card>

      <div class="q-pt-md">
        <q-card class="col-xs-12 col-sm-4 col-md-2" bordered>
          <q-bar>
            <div>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div>
          </q-bar>
          <q-card-section>
            <q-banner inline-actions rounded class="bg-orange text-white">
              <template #avatar>
                <q-icon name="info" />
              </template>
              –£–≤–∞–≥–∞, –Ω–µ –∑–∞–±—É–≤–∞–π—Ç–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è E-Steps –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ñ
              –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –∑–º—ñ–Ω–∏ —Ü—å–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –ø—Ä–∏–Ω—Ç–µ—Ä—ñ
            </q-banner>
            <p class="text-h6">
              (OldE / (Mark - Fact)) * Move =
              <span class="text-weight-bolder">NewE</span>
            </p>
            NewE - –ù–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è E-Steps<br>
            <q-badge color="info" text-color="black">
              Mark
              <q-icon name="info" size="14px" class="q-ml-xs" />
            </q-badge>
            - –î–µ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –º—ñ—Ç–∫—É (11 –∞–±–æ 31—Å–º –∞–±–æ —ñ–Ω—à–µ)<br>
            <q-badge color="info" text-color="black">
              Move
              <q-icon name="info" size="14px" class="q-ml-xs" />
            </q-badge>
            - –°–∫—ñ–ª—å–∫–∏ –≤–∏–¥–∞–≤–∏–ª–∏ (10—Å–º –∞–±–æ 30—Å–º –∞–±–æ —ñ–Ω—à–µ)<br>
            <q-badge color="info" text-color="black">
              Fact
              <q-icon name="info" size="14px" class="q-ml-xs" />
            </q-badge>
            - –í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ –º—ñ—Ç–∫–∏ –ø—ñ—Å–ª—è –≤–∏–¥–∞–≤–ª—é–≤–∞–Ω–Ω—è –ø—Ä—É—Ç–∫–∞<br>
            <q-badge color="info" text-color="black">
              OldE
              <q-icon name="info" size="14px" class="q-ml-xs" />
            </q-badge>
            - –ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è E-Steps<br>
            <q-banner
              rounded
              :class="
                ($q.dark.isActive ? 'bg-brown-10' : 'bg-warning') + ' q-mt-xs'
              "
            >
              <q-banner
                v-if="
                  oldE !== 0 && Math.abs(mark - move - fact) / (move / 100) < 1
                "
                class="bg-primary text-white"
              >
                <template #avatar>
                  <q-icon name="info" />
                </template>
                –ü–æ—Ö–∏–±–∫–∞ –º–µ–Ω—à–µ 1–º–º –Ω–∞ 10—Å–º, —Ü–µ —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –º–æ–∂–µ—Ç–µ
                –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –µ—Ç–∞–ø—É –∫–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è üòâ
              </q-banner>
              <p class="text-h6">
                ({{ oldE }} / ({{ mark }} - {{ fact }})) * {{ move }} =
                <span class="text-weight-bolder">{{
                  ((oldE / (mark - fact)) * move).toFixed(2)
                }}</span>
              </p>
              <q-input
                v-model.number="mark"
                class="q-pa-xs"
                type="number"
                filled
                label="Mark –î–µ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –º—ñ—Ç–∫—É"
              >
                <template #prepend>
                  <q-icon name="event" />
                </template>
              </q-input>
              <q-input
                v-model.number="move"
                class="q-pa-xs"
                type="number"
                filled
                label="Move –°–∫—ñ–ª—å–∫–∏ –≤–∏–¥–∞–≤–∏–ª–∏"
              />
              <q-input
                v-model.number="fact"
                class="q-pa-xs"
                type="number"
                filled
                label="Fact –í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ –º—ñ—Ç–∫–∏ –ø—ñ—Å–ª—è –≤–∏–¥–∞–≤–ª—é–≤–∞–Ω–Ω—è"
              />
              <q-input
                v-model.number="oldE"
                class="q-pa-xs"
                type="number"
                filled
                label="OldE –ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è E-Steps"
              />
            </q-banner>
          </q-card-section>
        </q-card>
      </div>
    </div>
  </q-page>
</template>

<script>
import { ref, defineComponent } from "vue";
import PopUpImage from "../../Components/PopUpImage.vue";

export default defineComponent({
  name: "ESteps",
  components: {
    PopUpImage,
  },
  setup() {
    return {
      imgUrl: ref(""),
      mark: ref(110),
      move: ref(100),
      fact: ref(10),
      oldE: ref(0),
    };
  },
});
</script>
